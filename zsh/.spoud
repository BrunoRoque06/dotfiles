#!/usr/bin/env bash

# Paths
readonly MR="$HOME/Projects/dm"

# Bazel
alias mono_compile_deps='(cd $HOME/Projects/bazel-deps; bazel run //:parse -- generate -r $MR -s 3rdparty/workspace.bzl -d dependencies.yaml)'

# Gerrit
readonly GERRIT_MASTER='gerrit/master'
alias geco='git checkout $GERRIT_MASTER'
gecob() { git checkout -b "$1" "$GERRIT_MASTER"; }
ged() { git diff --color gerrit/master.."$1" | diff-so-fancy | less -RFX; }
alias gepr='git push gerrit HEAD:refs/for/master -o topic=$(git rev-parse --abbrev-ref HEAD)'
alias gerb='git stash; git rebase $GERRIT_MASTER; git stash pop'
alias geud='git remote update gerrit --prune'
alias gewip='git push gerrit HEAD:refs/for/master%wip -o topic=$(git rev-parse --abbrev-ref HEAD)'

# Npm
alias npm_registry_spoud='npm config set registry https://spoudlab.jfrog.io/spoudlab/api/npm/npm/'

# Mono Repository
alias mrcd='cd $MR'
