#!/bin/zsh

# Antibody
alias armplugins='rm -rf $(antibody home)'

# Bazel
alias bb='bazel build'
alias bba='bazel build --verbose_failures //...'
bdeps() { bazel query 'deps('$1')' }
alias br='bazel run'
alias bt='bazel test'
alias bta='bazel test //...'

# Configurations
alias reload="exec zsh"
alias configzsh="$EDITOR $HOME/.zshrc"
alias configvim="$EDITOR $HOME/.vimrc"
alias configgit="$EDITOR $HOME/.gitconfig"

# Directories
alias ..='cd ..'
alias chmodx='chmod +x'
alias ls='ls -FHG'
alias la='ls -FHGa'
alias ll='ls -FHGal'
mvfiles() { mv $1*(DN) $2 }
alias rmrf='rm -rf'
up() {
  if [[ "$#" < 1 ]] ; then
    cd ..
  else
    local cdstr=""
    for i in {1..$1} ; do
      cdstr="../$cdstr"
    done
    cd $cdstr
  fi
}
alias tree='find . | sed -e "s/[^-][^\/]*\//  |/g" -e "s/|\([^ ]\)/|-\1/"'

# Docker
alias dr='docker build -t ${PWD##*/} . ; docker run --net='host' ${PWD##*/}'
alias dclean='docker system prune --volumes -f'
alias dcb='docker-compose build --force-rm --pull --no-cache'
alias dcu='dclean; dcb; docker-compose up'
dcfu() { docker-compose -f $1 up }
dcfd() { docker-compose -f $1 down }
alias dcps='docker-compose ps'
alias dps='docker ps -a'
alias drmi='docker rmi -f $(docker images -a -q)'
alias drmc='docker stop $(docker ps -a -q); docker rm $(docker ps -a -q)'

# Files
alias c='cat'
pastefile() { echo $(pbpaste) > $1 }
unzip() {
  mkdir ${1%.*}
  tar -xvzf $1 -C ${1%.*}
}

# Gerrit
readonly GERRIT_MASTER='gerrit/master'
alias gerritpr='git push gerrit HEAD:refs/for/master -o topic=$(git rev-parse --abbrev-ref HEAD)'
alias gerritrb="git rebase $GERRIT_MASTER"
gerritnewbranch() { git checkout -b $1 $GERRIT_MASTER }

# Git
alias ga='git add'
alias gaa='git add --a'
alias gba='git branch -a'
alias gbd='git branch -d'
alias gc='git commit'
alias gcam='git commit -am'
alias gcamend='git commit --amend --no-edit'
alias gco='git checkout'
alias gcob='git checkout -b'
alias gd='git diff --color | diff-so-fancy'
alias gl='git log --graph --abbrev-commit --decorate --format=format:"%C(blue)%h%C(reset) - %C(green)(%ar)%C(reset) %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(auto)%d%C(reset)" --all -20'
alias glp='git log -p'
alias gpush='git push -u origin $(git rev-parse --abbrev-ref HEAD)'
alias gpull='git pull'
alias grb='git rebase'
alias greset='git reset --hard'
alias gs='git status -u'

# Information
ap() { alias | grep ^$1 }

# Java
alias jr='java -jar'
alias jv='jar tvf'

# Maven
alias manalyse='mvn dependency:analyze'
alias minstall='mvn install'
alias mtree='mvn dependency:tree'

# Network
alias ports='lsof -PiTCP | grep LISTEN'

# Npm
alias nci="npm ci"
alias ni='npm install'
alias nlg='npm list -g --depth=0'
alias nr='npm run'
alias ns="awk '/\"scripts\":/,/}/' package.json"

# Pipelines
export GREP_OPTIONS='--color=always'
alias -g C='| pbcopy'
alias -g G='| grep'

# Text
replace() { echo ${1//$2/$3} }
trim() { echo $@ | tr -d '\040\011\012\015' }
json() { echo $1 | python -m json.tool }
