#!/usr/bin/env bash

printf 'Setting up fish...\n'

FISH_FUNCTIONS="$HOME"/.config/fish/functions
FISH_CONF="$HOME"/.config/fish/conf.d
mkdir -p "$FISH_FUNCTIONS"
mkdir -p "$FISH_CONF"

ln -fsv "$PWD"/fish/config.fish "$HOME"/.config/fish/config.fish

FILES=$(find "$PWD"/fish/functions "$PWD"/fish/conf.d -name "*.fish")
for FILE in $FILES
do
  FILE_NAME=$(basename "$FILE")
  ln -fsv "$FILE" "$FISH_FUNCTIONS"/"$FILE_NAME"
done

curl https://git.io/fisher --create-dirs -sLo ~/.config/fish/functions/fisher.fish
ln -fsv "$PWD"/fish/fishfile "$HOME"/.config/fish/fishfile
fish -c fisher
